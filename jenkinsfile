pipeline{
    
    agent any
    
    environment {
            JAVA_VERSION = "1.8.0" 
            //ANYPOINT_CREDS = credentials('anypoint-runtime')
            //ANYPOINT_MR_BG = credentials('anypoint-businessgroup')
            //GITHUB_CREDS = credentials('mule-github')
        }
    stages
    {
          stage("Git GetInfo")
           {
                // Stage to gather git variables to be used during further stages
                steps 
                {
                    bat "echo Git GetInfo"
                   // glGitGetInfo()
                }
            }
          stage("deploy to Dev")
           {
                steps 
                {
                    bat "echo Building and Unit Testing"
                  //  glMavenBuild mavenGoals:"clean verify"
                    deployToARM()
                }

           }
   }
}
 
void deployToARM() 
{
bat "echo Inside DeployToARM"
    // Deploy it to Mulesoft Runtime
    glMavenBuild mavenGoals: """ -U --batch-mode \
                            -Dmule.verbose.exceptions=true\
                            -Danypoint.username='PradeshTrix' \
                            -Danypoint.password='Mulesoft-123' \
                            -Denvironment='Sandbox' \
                            -DbusinessGroupId='concentrix' \
                            -DmuleDeploy -DskipTests clean deploy """ 
                
}
